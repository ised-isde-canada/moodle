@Library('ised-cicd-lib') _

pipeline {
	agent {
		label 'container-utils'
	}
   	
    options {
        disableConcurrentBuilds()
    }
   	
   	environment {
		// GLobal Vars
		OPENSHIFT_PROJECT = "learning-dev"
		IMAGE_NAME = "learning-moodle"
		PIPELINE_NAME = "${BUILD_NAME}-deploy"
    }
    
    stages {
    	stage('deploy') {
			steps {
				script {
    				deploy("${OPENSHIFT_PROJECT}", "${PIPELINE_NAME}", "${IMAGE_NAME}")
    			}
    		}
    	}
    }
}